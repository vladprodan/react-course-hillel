# –ü–æ–∫—Ä–æ–∫–æ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ Redux Toolkit

## –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Posts Slice –∑ createAsyncThunk

–°—Ç–≤–æ—Ä–∏–º–æ slice –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞–º–∏ –∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é:

```javascript
// features/posts/postsSlice.js
import { createSlice, createAsyncThunk } from "@reduxjs/toolkit";

// –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω
const initialState = {
  posts: [], // –ú–∞—Å–∏–≤ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤
  status: "idle", // 'idle' | 'loading' | 'succeeded' | 'failed'
  error: null, // –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
};

// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ thunk –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤
export const fetchPosts = createAsyncThunk(
  "posts/fetchPosts", // –ü—Ä–µ—Ñ—ñ–∫—Å –¥–ª—è action type
  async (_, { rejectWithValue }) => {
    try {
      // –í–∏–∫–æ–Ω—É—î–º–æ HTTP –∑–∞–ø–∏—Ç –¥–æ API
      const response = await fetch(
        "https://jsonplaceholder.typicode.com/posts?_limit=5"
      );

      // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –∑–∞–ø–∏—Ç —É—Å–ø—ñ—à–Ω–∏–π
      if (!response.ok) {
        throw new Error(`HTTP –ø–æ–º–∏–ª–∫–∞! –°—Ç–∞—Ç—É—Å: ${response.status}`);
      }

      // –ü–∞—Ä—Å–∏–º–æ JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—å
      const data = await response.json();

      // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –¥–∞–Ω—ñ (—Ü–µ –±—É–¥–µ payload –≤ fulfilled action)
      return data;
    } catch (error) {
      // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏ –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
      return rejectWithValue(error.message);
    }
  }
);

// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è slice
const postsSlice = createSlice({
  name: "posts",
  initialState,
  reducers: {
    // –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ reducers (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ)
    clearPosts: (state) => {
      state.posts = [];
      state.status = "idle";
      state.error = null;
    },
    clearError: (state) => {
      state.error = null;
    },
  },
  // –û–±—Ä–æ–±–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö actions
  extraReducers: (builder) => {
    builder
      // –û–±—Ä–æ–±–∫–∞ pending —Å—Ç–∞–Ω—É (–∑–∞–ø–∏—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ, –æ—á—ñ–∫—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å)
      .addCase(fetchPosts.pending, (state) => {
        state.status = "loading";
        state.error = null;
      })
      // –û–±—Ä–æ–±–∫–∞ fulfilled —Å—Ç–∞–Ω—É (—É—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å)
      .addCase(fetchPosts.fulfilled, (state, action) => {
        state.status = "succeeded";
        state.posts = action.payload; // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –æ—Ç—Ä–∏–º–∞–Ω—ñ –ø–æ—Å—Ç–∏
        state.error = null;
      })
      // –û–±—Ä–æ–±–∫–∞ rejected —Å—Ç–∞–Ω—É (–ø–æ–º–∏–ª–∫–∞)
      .addCase(fetchPosts.rejected, (state, action) => {
        state.status = "failed";
        // action.payload –º—ñ—Å—Ç–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É –ø–æ–º–∏–ª–∫—É –∑ rejectWithValue
        // action.error.message –º—ñ—Å—Ç–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É –ø–æ–º–∏–ª–∫—É
        state.error = action.payload || action.error.message;
      });
  },
});

// –ï–∫—Å–ø–æ—Ä—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö actions
export const { clearPosts, clearError } = postsSlice.actions;

// –°–µ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ —Å—Ç–∞–Ω—É
export const selectAllPosts = (state) => state.posts.posts;
export const selectPostsStatus = (state) => state.posts.status;
export const selectPostsError = (state) => state.posts.error;

// –ï–∫—Å–ø–æ—Ä—Ç reducer
export default postsSlice.reducer;
```

**–ü–æ—è—Å–Ω–µ–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö –º–æ–º–µ–Ω—Ç—ñ–≤:**

1. **createAsyncThunk** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î —Ç—Ä–∏ action types:

   - `posts/fetchPosts/pending` - –ø—Ä–∏ –ø–æ—á–∞—Ç–∫—É –∑–∞–ø–∏—Ç—É
   - `posts/fetchPosts/fulfilled` - –ø—Ä–∏ —É—Å–ø—ñ—Ö—É
   - `posts/fetchPosts/rejected` - –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ

2. **rejectWithValue** –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–¥–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É

3. **extraReducers** –æ–±—Ä–æ–±–ª—è—î –∑–æ–≤–Ω—ñ—à–Ω—ñ actions (–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –≤ reducers)

4. **builder.addCase** - —Å—É—á–∞—Å–Ω–∏–π —Å–ø–æ—Å—ñ–± –¥–æ–¥–∞–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤

---

## –ö—Ä–æ–∫ 2: –û–Ω–æ–≤–ª–µ–Ω–Ω—è Store

–î–æ–¥–∞–º–æ posts reducer –¥–æ store:

```javascript
// app/store.js
import { configureStore } from "@reduxjs/toolkit";
import authReducer from "../features/auth/authSlice";
import postsReducer from "../features/posts/postsSlice";

const store = configureStore({
  reducer: {
    auth: authReducer,
    posts: postsReducer, // –î–æ–¥–∞—î–º–æ posts reducer
  },
});

export default store;
```

---

## –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ PostsList

–°—Ç–≤–æ—Ä–∏–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –ø–æ—Å—Ç—ñ–≤:

```javascript
// components/PostsList.jsx
import React, { useEffect } from "react";
import { useDispatch, useSelector } from "react-redux";
import {
  fetchPosts,
  selectAllPosts,
  selectPostsStatus,
  selectPostsError,
  clearPosts,
} from "../features/posts/postsSlice";

function PostsList() {
  const dispatch = useDispatch();

  // –û—Ç—Ä–∏–º—É—î–º–æ –¥–∞–Ω—ñ –∑—ñ store
  const posts = useSelector(selectAllPosts);
  const status = useSelector(selectPostsStatus);
  const error = useSelector(selectPostsError);

  // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –ø–æ—Å—Ç–∏ –ø—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  useEffect(() => {
    // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —Å—Ç–∞–Ω 'idle' (—â–µ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏)
    if (status === "idle") {
      dispatch(fetchPosts());
    }
  }, [status, dispatch]);

  // –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  const handleRefresh = () => {
    dispatch(clearPosts());
    dispatch(fetchPosts());
  };

  // –£–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Å—Ç–∞—Ç—É—Å—É

  // –°—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  if (status === "loading") {
    return (
      <div
        style={{
          padding: "40px",
          textAlign: "center",
          backgroundColor: "#fff",
          borderRadius: "8px",
          margin: "20px auto",
          maxWidth: "800px",
          boxShadow: "0 2px 8px rgba(0,0,0,0.1)",
        }}
      >
        <div
          style={{
            width: "50px",
            height: "50px",
            border: "5px solid #f3f3f3",
            borderTop: "5px solid #2196F3",
            borderRadius: "50%",
            animation: "spin 1s linear infinite",
            margin: "0 auto 20px",
          }}
        />
        <h3 style={{ color: "#2196F3" }}>‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤...</h3>
        <p style={{ color: "#666" }}>–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞—á–µ–∫–∞–π—Ç–µ</p>

        <style>
          {`
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `}
        </style>
      </div>
    );
  }

  // –°—Ç–∞–Ω –ø–æ–º–∏–ª–∫–∏
  if (status === "failed") {
    return (
      <div
        style={{
          padding: "30px",
          textAlign: "center",
          backgroundColor: "#ffebee",
          borderRadius: "8px",
          margin: "20px auto",
          maxWidth: "800px",
          border: "2px solid #f44336",
          boxShadow: "0 2px 8px rgba(0,0,0,0.1)",
        }}
      >
        <h3 style={{ color: "#c62828", marginBottom: "15px" }}>
          ‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
        </h3>
        <p
          style={{
            color: "#666",
            marginBottom: "20px",
            padding: "15px",
            backgroundColor: "#fff",
            borderRadius: "6px",
          }}
        >
          <strong>–î–µ—Ç–∞–ª—ñ –ø–æ–º–∏–ª–∫–∏:</strong> {error}
        </p>
        <button
          onClick={handleRefresh}
          style={{
            padding: "12px 24px",
            backgroundColor: "#f44336",
            color: "white",
            border: "none",
            borderRadius: "6px",
            fontSize: "16px",
            cursor: "pointer",
            fontWeight: "bold",
            transition: "background-color 0.3s",
          }}
          onMouseOver={(e) => (e.target.style.backgroundColor = "#d32f2f")}
          onMouseOut={(e) => (e.target.style.backgroundColor = "#f44336")}
        >
          üîÑ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É
        </button>
      </div>
    );
  }

  // –°—Ç–∞–Ω —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  if (status === "succeeded") {
    return (
      <div
        style={{
          padding: "30px",
          backgroundColor: "#fff",
          borderRadius: "8px",
          margin: "20px auto",
          maxWidth: "800px",
          boxShadow: "0 2px 8px rgba(0,0,0,0.1)",
        }}
      >
        <div
          style={{
            display: "flex",
            justifyContent: "space-between",
            alignItems: "center",
            marginBottom: "25px",
            paddingBottom: "15px",
            borderBottom: "2px solid #e0e0e0",
          }}
        >
          <h2 style={{ color: "#333", margin: 0 }}>üìù –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—ñ–≤</h2>
          <button
            onClick={handleRefresh}
            style={{
              padding: "8px 16px",
              backgroundColor: "#2196F3",
              color: "white",
              border: "none",
              borderRadius: "6px",
              fontSize: "14px",
              cursor: "pointer",
              fontWeight: "bold",
            }}
          >
            üîÑ –û–Ω–æ–≤–∏—Ç–∏
          </button>
        </div>

        {posts.length === 0 ? (
          <p style={{ textAlign: "center", color: "#999" }}>–ü–æ—Å—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ</p>
        ) : (
          <div
            style={{ display: "flex", flexDirection: "column", gap: "15px" }}
          >
            {posts.map((post) => (
              <div
                key={post.id}
                style={{
                  padding: "20px",
                  backgroundColor: "#f9f9f9",
                  borderRadius: "8px",
                  border: "1px solid #e0e0e0",
                  transition: "transform 0.2s, box-shadow 0.2s",
                  cursor: "pointer",
                }}
                onMouseOver={(e) => {
                  e.currentTarget.style.transform = "translateY(-2px)";
                  e.currentTarget.style.boxShadow =
                    "0 4px 12px rgba(0,0,0,0.15)";
                }}
                onMouseOut={(e) => {
                  e.currentTarget.style.transform = "translateY(0)";
                  e.currentTarget.style.boxShadow = "none";
                }}
              >
                <div
                  style={{
                    display: "flex",
                    alignItems: "flex-start",
                    gap: "15px",
                  }}
                >
                  <div
                    style={{
                      minWidth: "40px",
                      height: "40px",
                      backgroundColor: "#2196F3",
                      color: "white",
                      borderRadius: "50%",
                      display: "flex",
                      alignItems: "center",
                      justifyContent: "center",
                      fontWeight: "bold",
                      fontSize: "16px",
                    }}
                  >
                    {post.id}
                  </div>

                  <div style={{ flex: 1 }}>
                    <h3
                      style={{
                        margin: "0 0 10px 0",
                        color: "#333",
                        fontSize: "18px",
                        lineHeight: "1.4",
                      }}
                    >
                      {post.title}
                    </h3>
                    <p
                      style={{
                        margin: 0,
                        color: "#666",
                        fontSize: "14px",
                        lineHeight: "1.6",
                      }}
                    >
                      {post.body}
                    </p>
                    <div
                      style={{
                        marginTop: "10px",
                        fontSize: "12px",
                        color: "#999",
                      }}
                    >
                      User ID: {post.userId}
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}

        <div
          style={{
            marginTop: "20px",
            padding: "15px",
            backgroundColor: "#e3f2fd",
            borderRadius: "6px",
            textAlign: "center",
          }}
        >
          <p style={{ margin: 0, color: "#1976d2", fontSize: "14px" }}>
            ‚úì –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ {posts.length} –ø–æ—Å—Ç—ñ–≤ –∑ JSONPlaceholder API
          </p>
        </div>
      </div>
    );
  }

  // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω (idle)
  return (
    <div
      style={{
        padding: "30px",
        textAlign: "center",
        backgroundColor: "#fff",
        borderRadius: "8px",
        margin: "20px auto",
        maxWidth: "800px",
        boxShadow: "0 2px 8px rgba(0,0,0,0.1)",
      }}
    >
      <h3 style={{ color: "#666" }}>
        –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏", —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Å—Ç–∏
      </h3>
      <button
        onClick={() => dispatch(fetchPosts())}
        style={{
          padding: "12px 24px",
          backgroundColor: "#4CAF50",
          color: "white",
          border: "none",
          borderRadius: "6px",
          fontSize: "16px",
          cursor: "pointer",
          fontWeight: "bold",
          marginTop: "15px",
        }}
      >
        –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ—Å—Ç–∏
      </button>
    </div>
  );
}

export default PostsList;
```

**–ü–æ—è—Å–Ω–µ–Ω–Ω—è –∫–æ–¥—É:**

- `useEffect` –≤–∏–∫–ª–∏–∫–∞—î `fetchPosts()` –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ `status === 'idle'` —â–æ–± –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –£–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å—Ç–∞–Ω—É: loading, failed, succeeded
- Hover –µ—Ñ–µ–∫—Ç–∏ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ UX
- –ö–Ω–æ–ø–∫–∞ "–û–Ω–æ–≤–∏—Ç–∏" –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## –ö—Ä–æ–∫ 4: –û–Ω–æ–≤–ª–µ–Ω–Ω—è App.jsx

–î–æ–¥–∞–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç PostsList –¥–æ –¥–æ–¥–∞—Ç–∫—É:

```javascript
// App.jsx
import React from "react";
import { Provider } from "react-redux";
import store from "./app/store";
import AuthStatus from "./components/AuthStatus";
import PostsList from "./components/PostsList";

function App() {
  return (
    <Provider store={store}>
      <div
        style={{
          minHeight: "100vh",
          backgroundColor: "#f0f2f5",
          padding: "40px 20px",
          fontFamily: "Arial, sans-serif",
        }}
      >
        <div style={{ maxWidth: "1200px", margin: "0 auto" }}>
          <h1
            style={{
              textAlign: "center",
              color: "#333",
              marginBottom: "40px",
              fontSize: "36px",
            }}
          >
            üöÄ Redux Toolkit Async Demo
          </h1>

          {/* –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó */}
          <AuthStatus />

          {/* –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫—É –ø–æ—Å—Ç—ñ–≤ */}
          <PostsList />

          {/* –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∞ –ø–∞–Ω–µ–ª—å */}
          <div
            style={{
              marginTop: "50px",
              padding: "25px",
              backgroundColor: "#fff",
              borderRadius: "8px",
              boxShadow: "0 2px 8px rgba(0,0,0,0.1)",
            }}
          >
            <h2 style={{ color: "#1976d2", marginTop: 0 }}>
              üìö –Ø–∫ –ø—Ä–∞—Ü—é—î createAsyncThunk:
            </h2>
            <ol style={{ lineHeight: "2", color: "#555" }}>
              <li>
                <strong>Pending:</strong> –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞–ø–∏—Ç, —Å—Ç–∞—Ç—É—Å –∑–º—ñ–Ω—é—î—Ç—å—Å—è
                –Ω–∞ 'loading'
              </li>
              <li>
                <strong>Fulfilled:</strong> –û—Ç—Ä–∏–º–∞–Ω–æ —É—Å–ø—ñ—à–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å, –¥–∞–Ω—ñ
                –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è
              </li>
              <li>
                <strong>Rejected:</strong> –í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞, –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è
                –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
              </li>
              <li>
                <strong>extraReducers:</strong> –û–±—Ä–æ–±–ª—è—î –≤—Å—ñ —Ç—Ä–∏ —Å—Ç–∞–Ω–∏
                –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
              </li>
            </ol>
          </div>
        </div>
      </div>
    </Provider>
  );
}

export default App;
```

---

## –ö—Ä–æ–∫ 5: –†–æ–∑—à–∏—Ä–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è –∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é

–î–æ–¥–∞–º–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±—ñ–ª—å—à–µ –ø–æ—Å—Ç—ñ–≤:

```javascript
// features/posts/postsSlice.js (—Ä–æ–∑—à–∏—Ä–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)
import { createSlice, createAsyncThunk } from "@reduxjs/toolkit";

const initialState = {
  posts: [],
  status: "idle",
  error: null,
  currentPage: 1,
  totalPages: 10,
  postsPerPage: 5,
};

// Thunk –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —Å—Ç–æ—Ä—ñ–Ω–∫–∏
export const fetchPosts = createAsyncThunk(
  "posts/fetchPosts",
  async (page = 1, { rejectWithValue }) => {
    try {
      const response = await fetch(
        `https://jsonplaceholder.typicode.com/posts?_page=${page}&_limit=5`
      );

      if (!response.ok) {
        throw new Error(`HTTP –ø–æ–º–∏–ª–∫–∞! –°—Ç–∞—Ç—É—Å: ${response.status}`);
      }

      const data = await response.json();
      return { posts: data, page };
    } catch (error) {
      return rejectWithValue(error.message);
    }
  }
);

// Thunk –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞
export const fetchPostById = createAsyncThunk(
  "posts/fetchPostById",
  async (postId, { rejectWithValue }) => {
    try {
      const response = await fetch(
        `https://jsonplaceholder.typicode.com/posts/${postId}`
      );

      if (!response.ok) {
        throw new Error("–ü–æ—Å—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ");
      }

      const data = await response.json();
      return data;
    } catch (error) {
      return rejectWithValue(error.message);
    }
  }
);

const postsSlice = createSlice({
  name: "posts",
  initialState,
  reducers: {
    clearPosts: (state) => {
      state.posts = [];
      state.status = "idle";
      state.error = null;
      state.currentPage = 1;
    },
    clearError: (state) => {
      state.error = null;
    },
    setPage: (state, action) => {
      state.currentPage = action.payload;
    },
  },
  extraReducers: (builder) => {
    builder
      // fetchPosts
      .addCase(fetchPosts.pending, (state) => {
        state.status = "loading";
        state.error = null;
      })
      .addCase(fetchPosts.fulfilled, (state, action) => {
        state.status = "succeeded";
        state.posts = action.payload.posts;
        state.currentPage = action.payload.page;
        state.error = null;
      })
      .addCase(fetchPosts.rejected, (state, action) => {
        state.status = "failed";
        state.error = action.payload || action.error.message;
      })
      // fetchPostById
      .addCase(fetchPostById.pending, (state) => {
        state.status = "loading";
      })
      .addCase(fetchPostById.fulfilled, (state, action) => {
        state.status = "succeeded";
        // –î–æ–¥–∞—î–º–æ –∞–±–æ –æ–Ω–æ–≤–ª—é—î–º–æ –ø–æ—Å—Ç
        const existingIndex = state.posts.findIndex(
          (post) => post.id === action.payload.id
        );
        if (existingIndex >= 0) {
          state.posts[existingIndex] = action.payload;
        } else {
          state.posts.push(action.payload);
        }
      })
      .addCase(fetchPostById.rejected, (state, action) => {
        state.status = "failed";
        state.error = action.payload;
      });
  },
});

export const { clearPosts, clearError, setPage } = postsSlice.actions;

export const selectAllPosts = (state) => state.posts.posts;
export const selectPostsStatus = (state) => state.posts.status;
export const selectPostsError = (state) => state.posts.error;
export const selectCurrentPage = (state) => state.posts.currentPage;
export const selectTotalPages = (state) => state.posts.totalPages;

export default postsSlice.reducer;
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é:

```javascript
// components/PostsListPaginated.jsx
import React, { useEffect } from "react";
import { useDispatch, useSelector } from "react-redux";
import {
  fetchPosts,
  selectAllPosts,
  selectPostsStatus,
  selectPostsError,
  selectCurrentPage,
  selectTotalPages,
  setPage,
} from "../features/posts/postsSlice";

function PostsListPaginated() {
  const dispatch = useDispatch();

  const posts = useSelector(selectAllPosts);
  const status = useSelector(selectPostsStatus);
  const error = useSelector(selectPostsError);
  const currentPage = useSelector(selectCurrentPage);
  const totalPages = useSelector(selectTotalPages);

  useEffect(() => {
    if (status === "idle") {
      dispatch(fetchPosts(currentPage));
    }
  }, [status, currentPage, dispatch]);

  const handlePageChange = (newPage) => {
    dispatch(setPage(newPage));
    dispatch(fetchPosts(newPage));
  };

  const handlePrevious = () => {
    if (currentPage > 1) {
      handlePageChange(currentPage - 1);
    }
  };

  const handleNext = () => {
    if (currentPage < totalPages) {
      handlePageChange(currentPage + 1);
    }
  };

  if (status === "loading") {
    return (
      <div style={{ textAlign: "center", padding: "40px" }}>
        <h3>‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</h3>
      </div>
    );
  }

  if (status === "failed") {
    return (
      <div style={{ textAlign: "center", padding: "40px", color: "red" }}>
        <h3>‚ùå –ü–æ–º–∏–ª–∫–∞: {error}</h3>
        <button onClick={() => dispatch(fetchPosts(currentPage))}>
          –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É
        </button>
      </div>
    );
  }

  return (
    <div
      style={{
        padding: "30px",
        backgroundColor: "#fff",
        borderRadius: "8px",
        margin: "20px auto",
        maxWidth: "800px",
      }}
    >
      <h2>üìù –ü–æ—Å—Ç–∏ (–°—Ç–æ—Ä—ñ–Ω–∫–∞ {currentPage})</h2>

      {posts.map((post) => (
        <div
          key={post.id}
          style={{
            padding: "15px",
            marginBottom: "15px",
            backgroundColor: "#f9f9f9",
            borderRadius: "6px",
          }}
        >
          <h3>{post.title}</h3>
          <p>{post.body}</p>
        </div>
      ))}

      {/* –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è */}
      <div
        style={{
          display: "flex",
          justifyContent: "center",
          alignItems: "center",
          gap: "15px",
          marginTop: "30px",
        }}
      >
        <button
          onClick={handlePrevious}
          disabled={currentPage === 1}
          style={{
            padding: "10px 20px",
            backgroundColor: currentPage === 1 ? "#ccc" : "#2196F3",
            color: "white",
            border: "none",
            borderRadius: "6px",
            cursor: currentPage === 1 ? "not-allowed" : "pointer",
          }}
        >
          ‚Üê –ü–æ–ø–µ—Ä–µ–¥–Ω—è
        </button>

        <span style={{ fontSize: "16px", fontWeight: "bold" }}>
          {currentPage} / {totalPages}
        </span>

        <button
          onClick={handleNext}
          disabled={currentPage === totalPages}
          style={{
            padding: "10px 20px",
            backgroundColor: currentPage === totalPages ? "#ccc" : "#2196F3",
            color: "white",
            border: "none",
            borderRadius: "6px",
            cursor: currentPage === totalPages ? "not-allowed" : "pointer",
          }}
        >
          –ù–∞—Å—Ç—É–ø–Ω–∞ ‚Üí
        </button>
      </div>
    </div>
  );
}

export default PostsListPaginated;
```

---

## –ö—Ä–æ–∫ 6: –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –º–µ—Ä–µ–∂—ñ

–î–æ–¥–∞–º–æ –±—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω—É –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫:

```javascript
// utils/apiErrorHandler.js
export const handleApiError = (error) => {
  if (error.response) {
    // –°–µ—Ä–≤–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–≤ –∑ –∫–æ–¥–æ–º –ø–æ–º–∏–ª–∫–∏
    return `–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${error.response.status} - ${
      error.response.data.message || "–ù–µ–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞"
    }`;
  } else if (error.request) {
    // –ó–∞–ø–∏—Ç –±—É–≤ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –∞–ª–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ
    return "–ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ: –ù–µ–º–æ–∂–ª–∏–≤–æ –∑'—î–¥–Ω–∞—Ç–∏—Å—è –∑ —Å–µ—Ä–≤–µ—Ä–æ–º";
  } else {
    // –©–æ—Å—å —ñ–Ω—à–µ –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫
    return `–ü–æ–º–∏–ª–∫–∞: ${error.message}`;
  }
};
```

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ thunk:

```javascript
export const fetchPosts = createAsyncThunk(
  "posts/fetchPosts",
  async (page = 1, { rejectWithValue }) => {
    try {
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 —Å–µ–∫ timeout

      const response = await fetch(
        `https://jsonplaceholder.typicode.com/posts?_page=${page}&_limit=5`,
        { signal: controller.signal }
      );

      clearTimeout(timeoutId);

      if (!response.ok) {
        throw new Error(`HTTP –ø–æ–º–∏–ª–∫–∞! –°—Ç–∞—Ç—É—Å: ${response.status}`);
      }

      const data = await response.json();
      return { posts: data, page };
    } catch (error) {
      if (error.name === "AbortError") {
        return rejectWithValue("–ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É");
      }
      return rejectWithValue(error.message);
    }
  }
);
```

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç 1: –£—Å–ø—ñ—à–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫
2. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –°–ø–æ—á–∞—Ç–∫—É –∑'—è–≤–ª—è—î—Ç—å—Å—è "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤..."
   - –ß–µ—Ä–µ–∑ 1-2 —Å–µ–∫—É–Ω–¥–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –∑ 5 –ø–æ—Å—Ç—ñ–≤
   - –°—Ç–∞—Ç—É—Å: 'succeeded'

### –¢–µ—Å—Ç 2: –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏

1. –í—ñ–¥–∫–ª—é—á—ñ—Ç—å —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç
2. –û–Ω–æ–≤—ñ—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É
3. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ó'—è–≤–ª—è—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
   - –ö–Ω–æ–ø–∫–∞ "–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É"
   - –°—Ç–∞—Ç—É—Å: 'failed'

### –¢–µ—Å—Ç 3: Redux DevTools

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Redux DevTools
2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –ø–æ—Å—Ç–∏
3. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - `posts/fetchPosts/pending`
   - `posts/fetchPosts/fulfilled` –∑ –¥–∞–Ω–∏–º–∏
   - –°—Ç–∞–Ω –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ

### –¢–µ—Å—Ç 4: –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è

1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ù–∞—Å—Ç—É–ø–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞"
2. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –Ω–æ–≤—ñ –ø–æ—Å—Ç–∏
   - –ù–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
project/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store.js
‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ authSlice.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ posts/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ postsSlice.js
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthStatus.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostsList.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PostsListPaginated.jsx
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ apiErrorHandler.js
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx
‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

---

## –ö–ª—é—á–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ createAsyncThunk

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è actions** - pending, fulfilled, rejected  
‚úÖ **–°–ø—Ä–æ—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** - —á–µ—Ä–µ–∑ rejectWithValue  
‚úÖ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ AbortController** - –¥–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤  
‚úÖ **TypeScript** - –ø–æ–≤–Ω–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è  
‚úÖ **Redux DevTools** - –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö —Å—Ç–∞–Ω—ñ–≤  
‚úÖ **–ú–µ–Ω—à–µ boilerplate** - –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ —Ä—É—á–Ω–∏–º–∏ thunks
